<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Active Contours Without Edges 期刊：IEEE Transactions on image processin 时间：2001 摘要 在本文中，我们提出了一种新的活动轮廓模型，用于检测给定图像中的对象，基于曲线演化技术，用于分割和水平集的Mumford-Shah函数。我们的模型可以检测其边界不一定由梯度定义的对象。我们最小化了能量，这可以看作是最小分区问题的一">
<meta property="og:type" content="article">
<meta property="og:title" content="Active_Contours_Without_Edges">
<meta property="og:url" content="http://example.com/2025/03/03/Active-Contours-Without-Edges/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:description" content="Active Contours Without Edges 期刊：IEEE Transactions on image processin 时间：2001 摘要 在本文中，我们提出了一种新的活动轮廓模型，用于检测给定图像中的对象，基于曲线演化技术，用于分割和水平集的Mumford-Shah函数。我们的模型可以检测其边界不一定由梯度定义的对象。我们最小化了能量，这可以看作是最小分区问题的一">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2025/03/03/Active-Contours-Without-Edges/Active-Contours-Without-Edges/1.png">
<meta property="og:image" content="http://example.com/2025/03/03/Active-Contours-Without-Edges/Active-Contours-Without-Edges/2.png">
<meta property="article:published_time" content="2025-03-03T00:52:42.000Z">
<meta property="article:modified_time" content="2025-03-10T09:36:27.103Z">
<meta property="article:author" content="宋嘉晨">
<meta property="article:tag" content="图像分割">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2025/03/03/Active-Contours-Without-Edges/Active-Contours-Without-Edges/1.png">

<link rel="canonical" href="http://example.com/2025/03/03/Active-Contours-Without-Edges/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Active_Contours_Without_Edges | 我的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">我的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook/" rel="section"><i class="fa fa-book fa-fw"></i>留言板</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/03/03/Active-Contours-Without-Edges/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="宋嘉晨">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="我的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Active_Contours_Without_Edges
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-03-03 08:52:42" itemprop="dateCreated datePublished" datetime="2025-03-03T08:52:42+08:00">2025-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-03-10 17:36:27" itemprop="dateModified" datetime="2025-03-10T17:36:27+08:00">2025-03-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%BA%E6%96%87%E6%B3%9B%E8%AF%BB/" itemprop="url" rel="index"><span itemprop="name">论文泛读</span></a>
                </span>
            </span>

          
            <span id="/2025/03/03/Active-Contours-Without-Edges/" class="post-meta-item leancloud_visitors" data-flag-title="Active_Contours_Without_Edges" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2025/03/03/Active-Contours-Without-Edges/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2025/03/03/Active-Contours-Without-Edges/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>12k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="active-contours-without-edges">Active Contours Without
Edges</h1>
<p>期刊：IEEE Transactions on image processin</p>
<p>时间：2001</p>
<h2 id="摘要">摘要</h2>
<p>在本文中，我们提出了一种新的活动轮廓模型，用于检测给定图像中的对象，基于曲线演化技术，用于分割和水平集的Mumford-Shah函数。我们的模型可以检测其边界不一定由梯度定义的对象。我们最小化了能量，这可以看作是最小分区问题的一个特殊情况。在水平集公式中，问题变成了一个
“平均曲率流”
--类似演化活动等值线，它将在所需的边界上停止。然而，停止项并不依赖于图像的梯度，就像经典的主动轮廓模型那样，而是与图像的特定分割有关。我们将给出一个使用有限差分的数值算法。最后，我们将介绍各种实验结果，特别是一些基于梯度的经典蛇方法不适用的示例。此外，初始曲线可以位于图像中的任何位置，并且会自动检测内部轮廓。
<span id="more"></span></p>
<h2 id="介绍">介绍</h2>
<p>活动轮廓模型或蛇的基本思想是在给定图像的约束下，演化一条曲线来检测图像中的物体。例如，从被检测物体周围的曲线开始，曲线向其内部法线方向移动，并且必须停在物体的边界上。</p>
<p>设<span class="math inline">\(\Omega\)</span>是<span class="math inline">\(\mathbb{R}^2\)</span>的有界开子集，<span class="math inline">\(\partial \Omega\)</span>其边界。设 <span class="math inline">\(u_0: \bar{\Omega} \rightarrow
\mathbb{R}\)</span>为给定图像，并且<span class="math inline">\(C(s):[0,1] \rightarrow
\mathbb{R}^2\)</span>为参数化曲线。</p>
<p>在经典的蛇和活动轮廓模型中，根据图像<span class="math inline">\(u_0\)</span>的梯度，使用一个边界检测算子来停止在期望物体边界上的演化曲线。接下来我们简要回顾这些模型。</p>
<p>蛇模型[9]为：<span class="math inline">\(\inf _C
J_1(C)\)</span>，其中 <span class="math display">\[
\begin{aligned}
J_1(C)= &amp; \alpha \int_0^1\left|C^{\prime}(s)\right|^2 d s+\beta
\int_0^1\left|C^{\prime \prime}(s)\right| d s \\
&amp; -\lambda \int_0^1\left|\nabla u_0(C(s))\right|^2 d s \qquad(1)
\end{aligned}
\]</span></p>
<p>式中，<span class="math inline">\(\alpha, \beta\)</span>和<span class="math inline">\(\lambda\)</span>为正参数。前两项控制轮廓的光滑性（内能），第三项则吸引轮廓朝向图像内的物体（外部能量）。观察到，通过最小化能量(1)，我们试图将曲线定位在极大值点<span class="math inline">\(|\nabla
u_0|\)</span>，作为一个边界检测算子，同时保持曲线的平滑性(对象边界)。</p>
<p>一般的边界检测算子可以通过一个递减函数<span class="math inline">\(g\)</span>来定义，取决于图像的梯度，使得 <span class="math display">\[
\lim _{z \rightarrow \infty} g(z)=0
\]</span></p>
<p>例如 <span class="math display">\[
g\left(\left|\nabla u_0(x, y)\right|\right)=\frac{1}{1+\left|\nabla
G_\sigma(x, y) * u_0(x, y)\right|^p}, \quad p \geq 1
\]</span></p>
<p>其中，<span class="math inline">\(G_\sigma * u_0\)</span>是<span class="math inline">\(u_0\)</span>更平滑的版本，是图像与高斯<span class="math inline">\(G_\sigma(x, y)=\)</span> <span class="math inline">\(\sigma^{-1 / 2} e^{-\left|x^2+y^2\right| / 4
\sigma}\)</span>的卷积。该函数<span class="math inline">\(g\left(\left|\nabla
u_0\right|\right)\)</span>在同质区域为正，在边缘处为零</p>
<p>在曲线演化问题中，水平集方法，特别是Osher和Sethian[19]的平均曲率运动得到了广泛的应用，因为它允许尖点、角点和自动拓扑变化。此外，问题的离散是在固定的矩形网格上进行的。曲线<span class="math inline">\(C\)</span>由Lipschitz函数<span class="math inline">\(\phi\)</span>隐式表示，由<span class="math inline">\(C=\{(x, y) \mid \phi(x,
y)=0\}\)</span>，曲线的演化由函数时刻的零水平曲线给出。将曲线沿法线方向以速度演化，就相当于求解了微分方程[19]
<span class="math display">\[
\frac{\partial \phi}{\partial t}=|\nabla \phi| F ; \phi(0, x,
y)=\phi_0(x, y)
\]</span></p>
<p>其中集合<span class="math inline">\(\left\{(x, y) \mid \phi_0(x,
y)=0\right\}\)</span>定义了初始轮廓。当<span class="math inline">\(F=\operatorname{div}(\nabla \phi(x, y) /|\nabla
\phi(x, y)|)\)</span>是通过<span class="math inline">\((x,
y)\)</span>的<span class="math inline">\(\phi\)</span>的水平曲线的曲率时，一种特殊情况是平均曲率运动。方程变为
<span class="math display">\[
\begin{cases}\frac{\partial \phi}{\partial t}=|\nabla \phi|
\operatorname{div}\left(\frac{\nabla \phi}{|\nabla \phi|}\right), &amp;
t \in(0, \infty), x \in \mathbb{R}^2 \\ \phi(0, x, y)=\phi_0(x, y),
&amp; x \in \mathbb{R}^2\end{cases}
\]</span></p>
<p>基于平均曲率运动的几何活动轮廓模型由以下演化方程[3]给出 <span class="math display">\[
\left\{\begin{array}{l}
\frac{\partial \phi}{\partial t}=g\left(\left|\nabla
u_0\right|\right)|\nabla \phi|\left(\operatorname{div}\left(\frac{\nabla
\phi}{|\nabla \phi|}\right)+\nu\right) \\
\text { in }(0, \infty) \times \mathbb{R}^2 \\
\phi(0, x, y)=\phi_0(x, y) \text { in } \mathbb{R}^2
\end{array}\right. \qquad(2)
\]</span></p>
<p>其中 <span class="math inline">\(g\left(\left|\nabla
u_0\right|\right) \quad\)</span> 边函数 <span class="math inline">\(p=2\)</span>; <span class="math inline">\(\nu \geq
0 \quad\)</span> 常数； <span class="math inline">\(\phi_0
\quad\)</span> 初始水平集函数。</p>
<p>它的零水平集曲线以速度<span class="math inline">\(g\left(\left|\nabla
u_0\right|\right)(\operatorname{curv}(\phi)(x,
y)+\mu)\)</span>沿法线方向移动，因此在期望的边界上停止，<span class="math inline">\(g\)</span>在那里消失。常数<span class="math inline">\(\nu\)</span>是为了使量<span class="math inline">\((\operatorname{div}(\nabla \phi(x, y) /|\nabla
\phi(x,
y)|)+\nu)\)</span>始终保持为正而选择的修正项。当曲率变为零或负时，这个常数可以解释为将曲线推向物体的力。同时，<span class="math inline">\(\nu&gt;0\)</span>也是对曲线内部面积的约束，提高了传播速度。</p>
<p>另外两个基于水平集的活动轮廓模型在[13]中被提出，再次使用图像梯度停止曲线。第一个是
<span class="math display">\[
\left\{\begin{array}{l}
\frac{\partial \phi}{\partial t}=|\nabla
\phi|\left(-\nu+\frac{\nu}{\left(M_1-M_2\right)}\left(\left|\nabla
G_\sigma * u_0\right|-M_2\right)\right), \\
\phi(0, x, y)=\phi_0(x, y) \text { in }[0, \infty) \times \mathbb{R}^2
\end{array}\right.
\]</span></p>
<p>其中<span class="math inline">\(\nu\)</span>是一个常数，并且<span class="math inline">\(M_1\)</span>和<span class="math inline">\(M_2\)</span>分别是图像梯度<span class="math inline">\(\mid \nabla G_\sigma{ }^*u_0
\mid\)</span>幅值的最大值和最小值。再次，在梯度最高的点上，演化曲线的速度变为零，因此曲线停止在强梯度定义的期望边界上。第二个模型[13]与几何模型[3]当<span class="math inline">\(p=1\)</span>类似，其他相关的工作有[14]和[15]</p>
<p>测地线模型[4]为 <span class="math display">\[
\inf _C J_2(C)=2 \int_0^1\left|C^{\prime}(s)\right| \cdot g\left(\mid
\nabla u_0(C(s) \mid) d s\right. \qquad(3)
\]</span></p>
<p>这是一个黎曼空间中的测地线计算问题，根据图像<span class="math inline">\(u_0\)</span>诱导的一个度量。求解最小化问题(3)，就是在该度量中寻找新长度最小的路径。当<span class="math inline">\(g\left(\mid \nabla u_0(C(s)
\mid)\right.\)</span>消失时，即当曲线在物体的边界上时，将得到一个极小点<span class="math inline">\(C\)</span>。文献[4]中的测地活动轮廓模型(3)也具有水平集形式
<span class="math display">\[
\left\{\begin{array}{l}
\frac{\partial \phi}{\partial t}=|\nabla
\phi|\left(\operatorname{div}\left(g\left(\left|\nabla u_0\right|\right)
\frac{\nabla \phi}{|\nabla \phi|}\right)+\nu g\left(\left|\nabla
u_0\right|\right)\right) \\
\text { in }\left[0, \infty\left[\times \mathbb{R}^2\right.\right. \\
\phi(0, x, y)=\phi_0(x, y) \text { in } \mathbb{R}^2 .
\end{array}\right. \qquad(4)
\]</span></p>
<p>由于所有这些经典的Snakes和活动轮廓模型都依赖于边函数，依赖于图像梯度<span class="math inline">\(\left|\nabla
u_0\right|\)</span>，以停止曲线演化，因此这些模型只能检测具有梯度定义的边缘的物体。在实际中，离散梯度是有界的，那么停止函数在边上永远不为零，曲线可能会穿过边界，特别是对于[3]，[13]
-
[15]中的模型。如果图像是非常噪声的，那么各向同性平滑高斯必须是强的，这将平滑边缘。在本文中，我们提出了一种不同的活动轮廓模型，没有一个停止边函数，即一个不基于图像梯度的停止过程的模型。停止项基于Mumford-Shah分割技术[18]。通过这种方式，我们获得了一个模型，它可以检测有梯度或无梯度的轮廓，例如具有非常光滑边界的物体，甚至具有不连续边界的物体。此外，我们的模型具有水平集形式，内部轮廓被自动检测，初始曲线可以在图像中的任何位置。</p>
<p>论文的大纲如下。在下一节中，我们将我们的模型引入能量最小化，并讨论其与用于分割的Mumford-
Shah泛函的关系。此外，我们用水平集函数来描述模型并计算相关的Euler-Lagrange方程。在第三节中我们给出了求解该问题的迭代算法及其离散化。在第四节中，我们通过在合成图像和真实图像上的各种数值结果来验证我们的模型，展示了我们前面所描述的模型的优势，并通过一个简短的总结部分来结束本文。</p>
<p>其他相关的工作还有[29]，[10]，[26]，[24]关于活动轮廓和分割，[28]，[11]关于从无组织点重建形状，最后是最近的工作[20]和[21]，其中提出了一种基于概率的测地活动区域模型结合经典的基于梯度的活动轮廓技术。</p>
<h2 id="模型的描述">模型的描述</h2>
<p>我们定义<span class="math inline">\(\Omega\)</span>中的演化曲线<span class="math inline">\(C\)</span>作为<span class="math inline">\(\Omega\)</span>的一个开子集<span class="math inline">\(\omega\)</span>的边界。(即 <span class="math inline">\(\omega \subset \Omega\)</span>, <span class="math inline">\(C=\partial \omega\)</span> )。下边，inside <span class="math inline">\((C)\)</span>表示区域<span class="math inline">\(\omega\)</span>，outside <span class="math inline">\((C)\)</span>表示区域<span class="math inline">\(\Omega \backslash \bar{\omega}\)</span></p>
<p>我们的方法是基于能量最小化的分割方法。让我们首先在一个简单的案例中解释模型的基本思想。假设图像<span class="math inline">\(u_0\)</span>由两个强度近似为分段常数的区域组成，且具有不同的值<span class="math inline">\(u_0^i\)</span>和<span class="math inline">\(u_0^o\)</span>。进一步假设待检测物体由具有值<span class="math inline">\(u_0^i\)</span>的区域表示。令其边界为<span class="math inline">\(C_0\)</span>。那么我们就有了对象内部的 <span class="math inline">\(u_0 \approx u_0^i\)</span>，和对象外部的<span class="math inline">\(u_0 \approx
u_0^o\)</span>。现在让我们考虑下面拟合项： <span class="math display">\[
\begin{aligned}
F_1(C)+F_2(C)= &amp; \int_{\text {inside }(C)}\left|u_0(x,
y)-c_1\right|^2 d x d y \\
&amp; +\int_{\text {outside }(C)}\left|u_0(x, y)-c_2\right|^2 d x d y
\end{aligned}
\]</span></p>
<p>这里<span class="math inline">\(C\)</span>是任何其他变量曲线，常数<span class="math inline">\(c_1,
c_2\)</span>视分别为内部和外部的平均值。在这种简单的情况下，很明显，对象的边界<span class="math inline">\(C_0\)</span>是拟合项的最小值。 <span class="math display">\[
\inf _C\left\{F_1(C)+F_2(C)\right\} \approx 0 \approx
F_1\left(C_0\right)+F_2\left(C_0\right)
\]</span></p>
<p>如果曲线<span class="math inline">\(C\)</span>在对象之外，那么<span class="math inline">\(F_1(C)&gt;0\)</span>且<span class="math inline">\(F_2(C) \approx 0\)</span>。如果曲线<span class="math inline">\(C\)</span>在物体内部，那么 <span class="math inline">\(F_1(C) \approx 0\)</span>但是<span class="math inline">\(F_2(C)&gt;0\)</span>。如果曲线<span class="math inline">\(C\)</span>既在物体内部，又在物体外部，则有<span class="math inline">\(F_1(C)&gt;0\)</span>且<span class="math inline">\(F_2(C)&gt;0\)</span>。最后，如果<span class="math inline">\(C=C_0\)</span>，拟合能量最小，即如果曲线在物体的边界上。这些基本注释如图1所示
<img src="/2025/03/03/Active-Contours-Without-Edges/Active-Contours-Without-Edges\1.png" alt="iamge"></p>
<p>在我们的活动轮廓模型中，我们将最小化上述拟合项，并添加一些正则化项，例如曲线<span class="math inline">\(C\)</span>的宽度，和(或)<span class="math inline">\(C\)</span>内部区域的面积。因此，我们引入能量泛函<span class="math inline">\(F\left(c_1, c_2, C\right)\)</span>，定义为</p>
<p><span class="math display">\[
\begin{aligned}
F\left(c_1, c_2, C\right)= &amp; \mu \cdot \text { Length }(C)+\nu \cdot
\operatorname{Area}(\text { inside }(C)) \\
&amp; +\lambda_1 \int_{\text {inside }(C)}\left|u_0(x, y)-c_1\right|^2 d
x d y \\
&amp; +\lambda_2 \int_{\text {outside }(C)}\left|u_0(x, y)-c_2\right|^2
d x d y
\end{aligned}
\]</span></p>
<p>其中，<span class="math inline">\(\mu \geq 0, \nu \geq 0, \lambda_1,
\lambda_2&gt;0\)</span>为固定参数。在我们几乎所有的数值计算中(见更进一步)，我们固定<span class="math inline">\(\lambda_1=\lambda_2=1\)</span>和<span class="math inline">\(\nu=0\)</span></p>
<p>因此，我们考虑极小化问题： <span class="math display">\[
\inf _{c_1, c_2, C} F\left(c_1, c_2, C\right)
\]</span></p>
<p>Remark 1: 在我们的模型中，Length <span class="math inline">\((C)\)</span>可以被改写为<span class="math inline">\((\text { Length }(C))^p\)</span>，<span class="math inline">\(p \geq 1\)</span>。如果我们考虑任意维数<span class="math inline">\(N&gt;1\)</span>(即<span class="math inline">\(\Omega \subset
\mathbb{R}^N\)</span>)的情形，那么<span class="math inline">\(p\)</span>可以有如下的值：对所有<span class="math inline">\(N\)</span>，<span class="math inline">\(p=1\)</span>或者<span class="math inline">\(p=N
/(N-1)\)</span>。对于最后一个表达式，我们使用等周不等式[7]，在某种意义上说Length与Area是"可比"的
<span class="math display">\[
\operatorname{Area}(\operatorname{inside}(C)) \leq c
\cdot(\operatorname{Length}(C))^{N /(N-1)}
\]</span></p>
<p>式中<span class="math inline">\(c\)</span>为仅依赖于<span class="math inline">\(N\)</span>的常数</p>
<p>A. 与Mumford-Shah泛函的关系</p>
<p>用于分割的Mumford-Shah泛函是[18] <span class="math display">\[
\begin{aligned}
F^{\mathrm{MS}}(u, C)= &amp; \mu \cdot \text { Length }(C) \\
&amp; +\lambda \int_{\Omega}\left|u_0(x, y)-u(x, y)\right|^2 d x d y \\
&amp; +\int_{\Omega \backslash C}|\nabla u(x, y)|^2 d x d y
\end{aligned}
\]</span></p>
<p>其中<span class="math inline">\(u_0: \bar{\Omega} \rightarrow
\mathbb{R}\)</span>是给定的图像，<span class="math inline">\(\mu\)</span>和<span class="math inline">\(\lambda\)</span>都是正参数。通过最小化该泛函得到的解图像是由光滑区域<span class="math inline">\(R_i\)</span>和具有尖锐边界的区域<span class="math inline">\(C\)</span>组成的。</p>
<p>这个问题的一个简化形式是将<span class="math inline">\(F^{\mathrm{MS}}\)</span>的限制简化为分段常数函数<span class="math inline">\(u\)</span>，即<span class="math inline">\(u=\)</span> constant <span class="math inline">\(c_i\)</span>在<span class="math inline">\(\Omega
\backslash C\)</span>的每个连通分支<span class="math inline">\(R_i\)</span>上。因此，正如D. Mumford和J . Shah
[18]所指出的那样，在每个连通分支<span class="math inline">\(R_i\)</span>上<span class="math inline">\(c_i=\operatorname{average}\left(u_0\right)\)</span>。简化后的情形称为最小划分问题。</p>
<p>我们的活动轮廓模型当<span class="math inline">\(\nu=0\)</span>和<span class="math inline">\(\lambda_1=\lambda_2=\lambda\)</span>时是极小分割问题的特例，在该问题中，我们寻找的是<span class="math inline">\(u_0\)</span>的最佳逼近<span class="math inline">\(u\)</span>，是一个只取两个值的函数，即 <span class="math display">\[
u=\left\{\begin{array}{l}
\operatorname{average}\left(u_0\right) \text { inside } C \\
\operatorname{average}\left(u_0\right) \text { outside } C
\end{array}\right. \qquad(5)
\]</span></p>
<p>并且具有一条边缘<span class="math inline">\(C\)</span>，由蛇或活动轮廓表示。</p>
<p>最小划分问题的这种特殊情况可以用水平集方法来描述和解决[19]。这将在下一节介绍。</p>
<p>B. 模型的水平集设定</p>
<p>在水平集方法[19]中，用一个Lipschitz函数的零水平集表示<span class="math inline">\(C \subset \Omega\)</span>，使得</p>
<p><span class="math display">\[
\left\{\begin{array}{l}
C=\partial \omega=\{(x, y) \in \Omega: \phi(x, y)=0\} \\
\text { inside }(C)=\omega=\{(x, y) \in \Omega: \phi(x, y)&gt;0\} \\
\text { outside }(C)=\Omega \backslash \bar{\omega}=\{(x, y) \in \Omega:
\phi(x, y)&lt;0\}
\end{array}\right.
\]</span></p>
<p><span class="math inline">\(\omega \subset
\Omega\)</span>是开的，且<span class="math inline">\(C=\partial
\omega\)</span>。我们在图2中说明了上述关于水平集函数<span class="math inline">\(\phi\)</span>的假设和符号，定义了演化曲线<span class="math inline">\(C\)</span>。 <img src="/2025/03/03/Active-Contours-Without-Edges/Active-Contours-Without-Edges\2.png" alt="iamge"></p>
<p>对于我们的变分活动轮廓模型的水平集形式，我们用未知变量<span class="math inline">\(\phi\)</span>代替未知变量<span class="math inline">\(C\)</span>，我们遵循[ 27 ]。</p>
<p>利用Heaviside函数<span class="math inline">\(H\)</span>和一维Dirac测度<span class="math inline">\(\delta_0\)</span>，并分别定义</p>
<p><span class="math display">\[
H(z)=\left\{\begin{array}{ll}
1, &amp; \text { if } z \geq 0 \\
0, &amp; \text { if } z&lt;0
\end{array} \quad \delta_0(z)=\frac{d}{d z} H(z)\right.
\]</span></p>
<p>我们用下面的方式来表示能量<span class="math inline">\(F\)</span>中的项： <span class="math display">\[
\begin{aligned}
\operatorname{Length}\{\phi=0\} &amp; =\int_{\Omega}|\nabla H(\phi(x,
y))| d x d y \\
&amp; =\int_{\Omega} \delta_0(\phi(x, y))|\nabla \phi(x, y)| d x d y \\
\text { Area }\{\phi \geq 0\} &amp; =\int_{\Omega} H(\phi(x, y)) d x d y
\end{aligned}
\]</span></p>
<p>且 <span class="math display">\[
\begin{aligned}
&amp; \int_{\phi&gt;0}\left|u_0(x, y)-c_1\right|^2 d x d y \\
&amp; \quad=\int_{\Omega}\left|u_0(x, y)-c_1\right|^2 H(\phi(x, y)) d x
d y \\
&amp; \int_{\phi&lt;0}\left|u_0(x, y)-c_2\right|^2 d x d y \\
&amp; \quad=\int_{\Omega}\left|u_0(x, y)-c_2\right|^2(1-H(\phi(x, y))) d
x d y
\end{aligned}
\]</span></p>
<p>那么，能量<span class="math inline">\(F\left(c_1, c_2,
\phi\right)\)</span>可以写成</p>
<p><span class="math display">\[
\begin{aligned}
&amp; F\left(c_1, c_2, \phi\right) \\
&amp; \quad=\quad \mu \int_{\Omega} \delta(\phi(x, y))|\nabla \phi(x,
y)| d x d y \\
&amp; \quad+\nu \int_{\Omega} H(\phi(x, y)) d x d y \\
&amp; \quad+\lambda_1 \int_{\Omega}\left|u_0(x, y)-c_1\right|^2
H(\phi(x, y)) d x d y \\
&amp; \quad+\lambda_2 \int_{\Omega}\left|u_0(x,
y)-c_2\right|^2(1-H(\phi(x, y))) d x d y
\end{aligned}
\]</span></p>
<p>我们注意到，正如(5)中所定义的<span class="math inline">\(u\)</span>那样，我们模型的解作为Mumford-Shah极小划分问题的一个特例，可以简单地写成使用水平集公式为
<span class="math display">\[
u(x, y)=c_1 H(\phi(x, y))+c_2(1-H(\phi(x, y))),(x, y) \in \bar{\Omega}
\]</span></p>
<p>保持<span class="math inline">\(\phi\)</span>固定和最小化关于常数<span class="math inline">\(c_1\)</span>和<span class="math inline">\(c_2\)</span>的能量<span class="math inline">\(F\left(c_1, c_2,
\phi\right)\)</span>，很容易表达这些常数的函数通过 <span class="math display">\[
c_1(\phi)=\frac{\int_{\Omega} u_0(x, y) H(\phi(x, y)) d x d
y}{\int_{\Omega} H(\phi(x, y)) d x d y} \qquad(6)
\]</span></p>
<p>若<span class="math inline">\(\int_{\Omega} H(\phi(x, y)) d x d
y&gt;0\)</span>(即如果曲线在<span class="math inline">\(\Omega\)</span>中具有非空内部)，且</p>
<p><span class="math display">\[
c_2(\phi)=\frac{\int_{\Omega} u_0(x, y)(1-H(\phi(x, y))) d x d
y}{\int_{\Omega}(1-H(\phi(x, y))) d x d y} \qquad(7)
\]</span></p>
<p>若<span class="math inline">\(\int_{\Omega}(1-H(\phi(x, y))) d x d
y&gt;0\)</span> (即如果曲线在<span class="math inline">\(\Omega\)</span>中有一个非空的外部)。对于相应的'退化'情况，对<span class="math inline">\(c_1\)</span>和<span class="math inline">\(c_2\)</span>的取值没有任何限制。那么，<span class="math inline">\(c_1\)</span>和<span class="math inline">\(c_2\)</span>实际上由下式给出 <span class="math display">\[
\left\{\begin{array}{l}
c_1(\phi)=\operatorname{average}\left(u_0\right) \text { in }\{\phi \geq
0\} \\
c_2(\phi)=\operatorname{average}\left(u_0\right) \text { in
}\{\phi&lt;0\}
\end{array}\right.
\]</span></p>
<p>Remark 2: 由前面的公式可知，能量只能写成关于<span class="math inline">\(H(\phi)\)</span>的函数，也就是集合<span class="math inline">\(\omega\)</span>的特征函数，用<span class="math inline">\(\chi_\omega\)</span>表示。那么我们就可以将能量改写成新的形式<span class="math inline">\(\mathcal{F}\)</span> <span class="math display">\[
\begin{aligned}
\mathcal{F}\left(\chi_\omega\right)= &amp; \mu \int_{\Omega}\left|\nabla
\chi_\omega(x, y)\right| d x d y+\nu \int_{\Omega} \chi_\omega(x, y) d x
d y \\
&amp; +\lambda_1 \int_{\Omega}\left(u_0(x, y)-c_1\left(\chi_\omega(x,
y)\right)\right)^2 \chi_\omega(x, y) d x d y \\
&amp; +\lambda_2 \int_{\Omega}\left(u_0(x, y)\right. \\
&amp; \left.-c_2\left(\chi_\omega(x,
y)\right)\right)^2\left(1-\chi_\omega(x, y)\right) d x d y
\end{aligned}
\]</span></p>
<p>因此，我们可以考虑新的极小化问题</p>
<p><span class="math display">\[
\inf _{\chi_\omega} \mathcal{F}\left(\chi_\omega\right), \chi_\omega(x,
y) \in\{0,1\} \mathcal{L}-\text { a.e. } \qquad(8)
\]</span></p>
<p>在<span class="math inline">\(\Omega\)</span>有限周长集合的特征函数中。这里，<span class="math inline">\(\mathcal{L}-\)</span>
a.e.表示关于Lebesgue测度几乎处处。</p>
<p>当然，我们期望能量<span class="math inline">\(F\left(c_1, c_2,
C\right)\)</span>极小元的存在性，因为有几个一般性的结果：我们的模型是极小划分问题的一个特例，它的存在性已经在[18]
(假设<span class="math inline">\(u_0\)</span>在<span class="math inline">\(\bar{\Omega}\)</span>上是连续的)，以及更一般的数据<span class="math inline">\(u_0\)</span>在[16]和[17]中得到了证明。同时，一般的Mumford-Shah分割问题的存在性已经在[5]中得到了证明。另一方面，由全变分
<span class="math inline">\(\int_{\Omega}\left|\nabla \chi_\omega\right|
d x d
y\)</span>的下半连续性和变分法的经典引理很容易证明，我们的极小化问题(8)存在极小点(这可以作为存在性的另一种证明)。
在本文中，水平集函数<span class="math inline">\(\phi\)</span>仅用于表示曲线，具有许多数值上的优势，但问题也只能用特征函数来描述和求解。</p>
<p>为了计算未知函数<span class="math inline">\(\phi\)</span>的Euler-Lagrange方程，我们考虑函数<span class="math inline">\(H\)</span>和<span class="math inline">\(\delta_0\)</span>的稍微正则化版本，这里用<span class="math inline">\(H_{\varepsilon}\)</span>和<span class="math inline">\(\delta_{\varepsilon}\)</span>，<span class="math inline">\(\varepsilon \rightarrow 0\)</span>表示。令<span class="math inline">\(H_{\varepsilon}\)</span>表示<span class="math inline">\(H\)</span>在<span class="math inline">\(C^2(\bar{\Omega})\)</span>上的正则化，且<span class="math inline">\(\delta_{\varepsilon}=H_{\varepsilon}^{\prime}\)</span>。我们将进一步给出这类近似的例子。用相关联的正则化泛函表示<span class="math inline">\(F_{\varepsilon}\)</span>，定义为 <span class="math display">\[
\begin{aligned}
&amp; F_{\varepsilon}\left(c_1, c_2, \phi\right) \\
&amp;= \mu \int_{\Omega} \delta_{\varepsilon}(\phi(x, y))|\nabla \phi(x,
y)| d x d y \\
&amp;+\nu \int_{\Omega} H_{\varepsilon}(\phi(x, y)) d x d y \\
&amp;+\lambda_1 \int_{\Omega}\left|u_0(x, y)-c_1\right|^2
H_{\varepsilon}(\phi(x, y)) d x d y \\
&amp;+\lambda_2 \int_{\Omega}\left|u_0(x,
y)-c_2\right|^2\left(1-H_{\varepsilon}(\phi(x, y))\right) d x d y
\end{aligned}
\]</span></p>
<p>保持<span class="math inline">\(c_1\)</span>和<span class="math inline">\(c_2\)</span>固定，并对<span class="math inline">\(\phi\)</span>最小化<span class="math inline">\(F_{\varepsilon}\)</span>，我们推导出<span class="math inline">\(\phi\)</span>相应的Euler-Lagrange方程。通过人工时间<span class="math inline">\(t \geq 0\)</span>参数化下降方向，<span class="math inline">\(\phi(t, x, y)\)</span>(通过定义初始轮廓<span class="math inline">\(\phi(0, x, y)=\phi_0(x, y)\)</span>)中的方程为</p>
<p><span class="math display">\[
\begin{gathered}
\frac{\partial \phi}{\partial t}=\delta_{\varepsilon}(\phi)\left[\mu
\operatorname{div}\left(\frac{\nabla \phi}{|\nabla
\phi|}\right)-\nu-\lambda_1\left(u_0-c_1\right)^2\right. \\
\left.+\lambda_2\left(u_0-c_2\right)^2\right]=0 \text { in }(0, \infty)
\times \Omega \\
\phi(0, x, y)=\phi_0(x, y) \text { in } \Omega \\
\frac{\delta_{\varepsilon}(\phi)}{|\nabla \phi|} \frac{\partial
\phi}{\partial \vec{n}}=0 \text { on } \partial \Omega\qquad(9)
\end{gathered}
\]</span></p>
<p>其中<span class="math inline">\(\vec{n}\)</span>表示边界<span class="math inline">\(\partial \Omega\)</span>的外法线，<span class="math inline">\(\partial \phi / \partial
\vec{n}\)</span>表示边界处<span class="math inline">\(\phi\)</span>的法向导数</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%9B%BE%E5%83%8F%E5%88%86%E5%89%B2/" rel="tag"># 图像分割</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/03/02/The-Perception-Distortion-Tradeoff/" rel="prev" title="The_Perception-Distortion_Tradeoff">
      <i class="fa fa-chevron-left"></i> The_Perception-Distortion_Tradeoff
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/03/03/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E7%9A%84%E5%81%8F%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" rel="next" title="图像处理的偏微分方程方法总结">
      图像处理的偏微分方程方法总结 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#active-contours-without-edges"><span class="nav-text">Active Contours Without
Edges</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%91%98%E8%A6%81"><span class="nav-text">摘要</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="nav-text">模型的描述</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="宋嘉晨"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">宋嘉晨</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">宋嘉晨</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">153k</span>
</div>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共153k字</span>
  <span class="post-meta-divider">|</span>
  本站总访问量<span id="busuanzi_value_site_pv"></span>次
  <span class="post-meta-divider">|</span>
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
  <span class="post-meta-divider">|</span>
  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
</div>

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共153k字</span>
</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'x2HNNt4kVm1AzbK4G5OMYocX-gzGzoHsz',
      appKey     : 'UZukMakW4tBBED8F52h1Hgn4',
      placeholder: "输入你的评论\n不输入昵称则为匿名",
      avatar     : '',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>

<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
